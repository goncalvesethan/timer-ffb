<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LBCVL - Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

        .timer-display {
            font-family: 'Montserrat', sans-serif;
        }

        .flash {
            animation: flash 0.5s infinite;
        }

        @keyframes flash {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0.6;
            }
        }

        #main-content {
            background-image: url('https://m.ffbillard.com/medias/fonds/fond-01.jpg');
            background-size: cover;
            background-position: left center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }

        .bg-overlay {
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(1px);
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- En-tête avec logos -->
    <div class="bg-white shadow-lg">
        <div class="flex justify-between items-center px-8 py-4 max-w-6xl mx-auto">
            <img class="h-[4rem] md:h-[8rem]"
                src="https://m.ffbillard.com/medias/logos-ffb/_800.ffb-logo2015-ligue-centre-val-de-loire.png"
                alt="Logo FFB Centre-Val de Loire">
            <img class="h-[4rem] md:h-[6rem]"
                src="https://upload.wikimedia.org/wikipedia/fr/thumb/2/25/Logo_region_centre-val_de_loire.svg/langfr-1842px-Logo_region_centre-val_de_loire.svg.png"
                alt="Logo Région Centre-Val de Loire">
        </div>
    </div>

    <!-- Contenu principal -->
    <div id="main-content" class="min-h-screen">
        <div class="max-w-4xl mx-auto px-6 py-12 flex flex-col gap-8">
            <!-- Affichage du timer -->
            <div class="bg-white rounded-2xl shadow-xl">
                <div class="timer-display text-center">
                    <div class="text-[14rem] font-bold text-gray-800" id="countdown">45</div>
                </div>
            </div>

            <!-- Boutons de contrôle principaux -->
            <div class="bg-white rounded-2xl shadow-xl p-8 flex flex-col gap-6">
                <!-- Boutons principaux -->
                <div class="flex gap-6 justify-center">
                    <button id="reset"
                        class="bg-amber-400 text-white px-12 py-6 text-4xl font-bold rounded-lg uppercase flex items-center gap-4"
                        title="Effacer">
                        <i class="fas fa-undo"></i>
                    </button>
                    <button id="start"
                        class="bg-green-500 text-white px-12 py-6 text-4xl font-bold rounded-lg uppercase flex items-center gap-4"
                        title="Démarrer">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="pause"
                        class="bg-green-500 text-white px-12 py-6 text-4xl font-bold rounded-lg uppercase flex items-center gap-4 hidden"
                        title="Pause">
                        <i class="fas fa-pause"></i>
                    </button>
                </div>

                <!-- Boutons d'extension -->
                <div class="flex gap-6 justify-center">
                    <button id="ext-1" class="bg-blue-500 text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase">
                        EXT 1
                    </button>
                    <button id="ext-2" class="bg-blue-500 text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase">
                        EXT 2
                    </button>
                </div>
            </div>

            <!-- Bouton effacer tout -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="flex justify-center">
                    <button id="reset-all"
                        class="bg-[#E10C19] text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase">
                        Effacer tout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const countdown = document.getElementById("countdown");
        const startButton = document.getElementById("start");
        const pauseButton = document.getElementById("pause");
        const resetButton = document.getElementById("reset");
        const ext1Button = document.getElementById("ext-1");
        const ext2Button = document.getElementById("ext-2");
        const resetAllButton = document.getElementById("reset-all");

        let countdownValue = 45;
        let interval;
        let countdownStarted = false;
        let ext1Used = false;
        let ext2Used = false;

        countdown.textContent = countdownValue;

        function showPlayButton() {
            startButton.classList.remove("hidden");
            pauseButton.classList.add("hidden");
        }

        function showPauseButton() {
            startButton.classList.add("hidden");
            pauseButton.classList.remove("hidden");
        }

        function resetCountdown(restart) {
            countdownValue = 45;
            countdown.textContent = countdownValue;
            clearInterval(interval);
            countdownStarted = false;
            countdown.classList.remove("flash");
            countdown.className = "text-[14rem] font-bold text-gray-800";
            showPlayButton();
            if (restart) startCountdown();
        }

        function startCountdown() {
            countdownStarted = true;
            showPauseButton();
            interval = setInterval(() => {
                countdownValue--;
                countdown.textContent = countdownValue;

                if (countdownValue === 5) {
                    countdown.classList.add("flash");
                }

                if (countdownValue === 0) {
                    clearInterval(interval);
                    countdown.className = "text-[14rem] font-bold text-[#E10C19]";
                    startButton.classList.add("hidden");
                    pauseButton.classList.add("hidden");
                }
            }, 1000);
        }

        function pauseCountdown() {
            clearInterval(interval);
            showPlayButton();
        }

        function addTime(button) {
            if (button.disabled || !countdownStarted) {
                return;
            }
            countdownValue += 45;
            countdown.textContent = countdownValue;

            if (countdownValue > 5) {
                countdown.classList.remove("flash");
                button.className = "bg-gray-400 text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase";
            }
            button.disabled = true;

            if (button.id === 'ext-1') {
                ext1Used = true;
            } else if (button.id === 'ext-2') {
                ext2Used = true;
            }
        }

        startButton.addEventListener("click", () => { startCountdown(); });
        pauseButton.addEventListener("click", () => { pauseCountdown(); });
        resetButton.addEventListener("click", () => { resetCountdown(true); });
        ext1Button.addEventListener("click", () => addTime(ext1Button));
        ext2Button.addEventListener("click", () => addTime(ext2Button));
        resetAllButton.addEventListener("click", () => {
            resetCountdown(false);
            ext1Button.disabled = false;
            ext2Button.disabled = false;
            ext1Button.className = "bg-blue-500 text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase";
            ext2Button.className = "bg-blue-500 text-white px-6 py-3 text-2xl font-bold rounded-lg uppercase";
            ext1Used = false;
            ext2Used = false;
        });
    </script>
</body>

</html>